<html>
<head>
<title>Employee CRUD</title>
<script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
<script>
	$(window).ready(
			function() {
				$.get("/employee", function(data, status) {
					data.forEach(function(d, i) {
						var content = "<tr><td>" + d.id;
						content += "</td><td>" + d.name;
						content += "</td><td>" + d.phone;
						content += "</td><td>" + d.dept;
						content += "</td><td><a class='btn btn-primary' href='form.html?id=" + d.id
								+ "'>Edit</a> ";
						content += "<a class='btn btn-danger' onClick=remove(" + d.id
								+ ") href='#'>Delete</a>";
						content += "</td></tr>";
						$('#data').append(content);
					})
					$('#tb-employee').DataTable();
				});
			});
	function remove(id) {
		$.ajax({
			url : "/employee/" + id,
			type : 'DELETE',
			success : function(data, status) {
				if (status == "success") {
					alert("Record Deleted")
					window.location.replace("/")
				} else {
					alert(status + " Something went wrong")
				}
			}
		})
	}
</script>
</head>
<body>
	<div class="container">
		<nav class="navbar">
			<div class="navbar-header">
				<h1>Employee CRUD Application</h1>
			</div>
			<ul class="nav navbar-nav navbar-right">
				<li><a class="btn btn-success" href="form.html">Add New Employee</a></li>
			</ul>
		</nav>
		<table id="tb-employee" class="table table-striped">
			<thead>
				<tr>
					<th>id</th>
					<th>name</th>
					<th>phone</th>
					<th>dept</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody id="data">

			</tbody>
		</table>
	</div>
</body>
</html>